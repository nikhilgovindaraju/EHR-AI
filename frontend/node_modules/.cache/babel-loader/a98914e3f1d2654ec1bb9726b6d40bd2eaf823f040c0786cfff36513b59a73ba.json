{"ast":null,"code":"var _jsxFileName = \"/Users/nikhilgovindaraju/Documents/Projects/EHR-AI/frontend/src/pages/DeleteRecord.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from \"react\";\nimport { useNavigate, useLocation } from \"react-router-dom\";\nimport axios from \"../services/api\";\nimport \"../styles/viewlogs.css\";\nimport Layout from \"../components/Layout\";\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction DeleteRecord() {\n  _s();\n  var _location$state;\n  const navigate = useNavigate();\n  const location = useLocation();\n  const incomingPatientId = (_location$state = location.state) === null || _location$state === void 0 ? void 0 : _location$state.patientId;\n  const userId = localStorage.getItem(\"user_id\");\n  const role = localStorage.getItem(\"role\");\n  const [logs, setLogs] = useState([]);\n  const [selectedLog, setSelectedLog] = useState(null);\n  const [error, setError] = useState(\"\");\n  const [success, setSuccess] = useState(\"\");\n  useEffect(() => {\n    if (!userId || role !== \"doctor\") {\n      navigate(\"/\");\n    } else {\n      fetchLogs();\n    }\n  }, []);\n  const fetchLogs = async () => {\n    try {\n      const params = {\n        user_id: userId,\n        role\n      };\n      const response = await axios.get(\"/api/audit/logs\", {\n        params\n      });\n      setLogs(response.data.logs);\n    } catch {\n      setError(\"Failed to load logs.\");\n    }\n  };\n  useEffect(() => {\n    if (incomingPatientId && logs.length > 0) {\n      const match = logs.find(log => log.patient_id === incomingPatientId);\n      if (match) setSelectedLog(match);else setError(\"No matching patient found.\");\n    }\n  }, [logs, incomingPatientId]);\n  const handleDelete = async () => {\n    try {\n      await axios.delete(`/api/audit/delete-log/${selectedLog.id}`);\n      setSuccess(\"✅ Record deleted!\");\n      setTimeout(() => navigate(\"/dashboard\"), 1500);\n    } catch {\n      setError(\"❌ Delete failed.\");\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(Layout, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"viewlogs-wrapper\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"logs-card\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: [/*#__PURE__*/_jsxDEV(\"i\", {\n            className: \"bi bi-trash\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 60,\n            columnNumber: 13\n          }, this), \" Delete Patient Record\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 60,\n          columnNumber: 9\n        }, this), selectedLog ? /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"Are you sure you want to permanently delete the record for:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 64,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n            children: [/*#__PURE__*/_jsxDEV(\"li\", {\n              children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                children: \"Patient ID:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 66,\n                columnNumber: 19\n              }, this), \" \", selectedLog.patient_id]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 66,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n              children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                children: \"Name:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 67,\n                columnNumber: 19\n              }, this), \" \", selectedLog.patient_name]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 67,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n              children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                children: \"Diagnosis:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 68,\n                columnNumber: 19\n              }, this), \" \", selectedLog.diagnosis]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 68,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n              children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                children: \"Visit Date:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 69,\n                columnNumber: 19\n              }, this), \" \", selectedLog.visit_date]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 69,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 65,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn btn-danger w-100 mb-2\",\n            onClick: handleDelete,\n            children: \"Confirm Delete\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 71,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn btn-outline-secondary w-100\",\n            onClick: () => navigate(\"/dashboard\"),\n            children: \"Cancel\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 74,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true) : /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-muted\",\n          children: \"Loading patient record...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 11\n        }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-danger mt-3 text-center\",\n          children: error\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 19\n        }, this), success && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-success mt-3 text-center\",\n          children: success\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 7\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 5\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 57,\n    columnNumber: 5\n  }, this);\n}\n_s(DeleteRecord, \"22KBCkDxCPmL1oxCOgJQE7lhXi8=\", false, function () {\n  return [useNavigate, useLocation];\n});\n_c = DeleteRecord;\nexport default DeleteRecord;\nvar _c;\n$RefreshReg$(_c, \"DeleteRecord\");","map":{"version":3,"names":["React","useEffect","useState","useNavigate","useLocation","axios","Layout","jsxDEV","_jsxDEV","Fragment","_Fragment","DeleteRecord","_s","_location$state","navigate","location","incomingPatientId","state","patientId","userId","localStorage","getItem","role","logs","setLogs","selectedLog","setSelectedLog","error","setError","success","setSuccess","fetchLogs","params","user_id","response","get","data","length","match","find","log","patient_id","handleDelete","delete","id","setTimeout","children","className","fileName","_jsxFileName","lineNumber","columnNumber","patient_name","diagnosis","visit_date","onClick","_c","$RefreshReg$"],"sources":["/Users/nikhilgovindaraju/Documents/Projects/EHR-AI/frontend/src/pages/DeleteRecord.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { useNavigate, useLocation } from \"react-router-dom\";\nimport axios from \"../services/api\";\nimport \"../styles/viewlogs.css\";\nimport Layout from \"../components/Layout\";\n\nfunction DeleteRecord() {\n  const navigate = useNavigate();\n  const location = useLocation();\n  const incomingPatientId = location.state?.patientId;\n\n  const userId = localStorage.getItem(\"user_id\");\n  const role = localStorage.getItem(\"role\");\n\n  const [logs, setLogs] = useState([]);\n  const [selectedLog, setSelectedLog] = useState(null);\n  const [error, setError] = useState(\"\");\n  const [success, setSuccess] = useState(\"\");\n\n  useEffect(() => {\n    if (!userId || role !== \"doctor\") {\n      navigate(\"/\");\n    } else {\n      fetchLogs();\n    }\n  }, []);\n\n  const fetchLogs = async () => {\n    try {\n      const params = { user_id: userId, role };\n      const response = await axios.get(\"/api/audit/logs\", { params });\n      setLogs(response.data.logs);\n    } catch {\n      setError(\"Failed to load logs.\");\n    }\n  };\n\n  useEffect(() => {\n    if (incomingPatientId && logs.length > 0) {\n      const match = logs.find((log) => log.patient_id === incomingPatientId);\n      if (match) setSelectedLog(match);\n      else setError(\"No matching patient found.\");\n    }\n  }, [logs, incomingPatientId]);\n\n  const handleDelete = async () => {\n    try {\n      await axios.delete(`/api/audit/delete-log/${selectedLog.id}`);\n      setSuccess(\"✅ Record deleted!\");\n      setTimeout(() => navigate(\"/dashboard\"), 1500);\n    } catch {\n      setError(\"❌ Delete failed.\");\n    }\n  };\n\n  return (\n    <Layout>\n    <div className=\"viewlogs-wrapper\">\n      <div className=\"logs-card\">\n        <h2><i className=\"bi bi-trash\"></i> Delete Patient Record</h2>\n\n        {selectedLog ? (\n          <>\n            <p>Are you sure you want to permanently delete the record for:</p>\n            <ul>\n              <li><strong>Patient ID:</strong> {selectedLog.patient_id}</li>\n              <li><strong>Name:</strong> {selectedLog.patient_name}</li>\n              <li><strong>Diagnosis:</strong> {selectedLog.diagnosis}</li>\n              <li><strong>Visit Date:</strong> {selectedLog.visit_date}</li>\n            </ul>\n            <button className=\"btn btn-danger w-100 mb-2\" onClick={handleDelete}>\n              Confirm Delete\n            </button>\n            <button className=\"btn btn-outline-secondary w-100\" onClick={() => navigate(\"/dashboard\")}>\n              Cancel\n            </button>\n          </>\n        ) : (\n          <p className=\"text-muted\">Loading patient record...</p>\n        )}\n\n        {error && <div className=\"text-danger mt-3 text-center\">{error}</div>}\n        {success && <div className=\"text-success mt-3 text-center\">{success}</div>}\n      </div>\n    </div>\n    </Layout>\n  );\n}\n\nexport default DeleteRecord;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}